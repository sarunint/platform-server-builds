{"version":3,"file":"platform-server.js","sources":["../../../packages/platform-server/src/domino_adapter.js","../../../packages/platform-server/src/platform_state.js","../../../packages/platform-server/src/http.js","../../../packages/platform-server/src/tokens.js","../../../packages/platform-server/src/location.js","../../../packages/platform-server/src/server_events.js","../../../packages/platform-server/src/server_renderer.js","../../../packages/platform-server/src/styles_host.js","../../../packages/platform-server/src/server.js","../../../packages/platform-server/src/transfer_state.js","../../../packages/platform-server/src/utils.js","../../../packages/platform-server/src/private_export.js","../../../packages/platform-server/src/version.js","../../../packages/platform-server/src/platform-server.js","../../../packages/platform-server/public_api.js","../../../packages/platform-server/platform-server.js"],"sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/** *\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n  @type {?} */\nconst domino = require('domino');\nimport { ɵBrowserDomAdapter as BrowserDomAdapter, ɵsetRootDomAdapter as setRootDomAdapter } from '@angular/platform-browser';\n/**\n * @param {?} methodName\n * @return {?}\n */\nfunction _notImplemented(methodName) {\n    return new Error('This method is not implemented in DominoAdapter: ' + methodName);\n}\n/**\n * @return {?}\n */\nfunction setDomTypes() {\n    // Make all Domino types available as types in the global env.\n    Object.assign(global, domino.impl);\n    (/** @type {?} */ (global))['KeyboardEvent'] = domino.impl.Event;\n}\n/**\n * Parses a document string to a Document object.\n * @param {?} html\n * @param {?=} url\n * @return {?}\n */\nexport function parseDocument(html, url = '/') {\n    /** @type {?} */\n    let window = domino.createWindow(html, url);\n    /** @type {?} */\n    let doc = window.document;\n    return doc;\n}\n/**\n * Serializes a document to string.\n * @param {?} doc\n * @return {?}\n */\nexport function serializeDocument(doc) {\n    return (/** @type {?} */ (doc)).serialize();\n}\n/**\n * DOM Adapter for the server platform based on https://github.com/fgnass/domino.\n */\nexport class DominoAdapter extends BrowserDomAdapter {\n    /**\n     * @return {?}\n     */\n    static makeCurrent() {\n        setDomTypes();\n        setRootDomAdapter(new DominoAdapter());\n    }\n    /**\n     * @param {?} error\n     * @return {?}\n     */\n    logError(error) { console.error(error); }\n    /**\n     * @param {?} error\n     * @return {?}\n     */\n    log(error) {\n        // tslint:disable-next-line:no-console\n        console.log(error);\n    }\n    /**\n     * @param {?} error\n     * @return {?}\n     */\n    logGroup(error) { console.error(error); }\n    /**\n     * @return {?}\n     */\n    logGroupEnd() { }\n    /**\n     * @return {?}\n     */\n    supportsDOMEvents() { return false; }\n    /**\n     * @return {?}\n     */\n    supportsNativeShadowDOM() { return false; }\n    /**\n     * @param {?} nodeA\n     * @param {?} nodeB\n     * @return {?}\n     */\n    contains(nodeA, nodeB) {\n        /** @type {?} */\n        let inner = nodeB;\n        while (inner) {\n            if (inner === nodeA)\n                return true;\n            inner = inner.parent;\n        }\n        return false;\n    }\n    /**\n     * @return {?}\n     */\n    createHtmlDocument() {\n        return parseDocument('<html><head><title>fakeTitle</title></head><body></body></html>');\n    }\n    /**\n     * @return {?}\n     */\n    getDefaultDocument() {\n        if (!DominoAdapter.defaultDoc) {\n            DominoAdapter.defaultDoc = domino.createDocument();\n        }\n        return DominoAdapter.defaultDoc;\n    }\n    /**\n     * @param {?} el\n     * @param {?=} doc\n     * @return {?}\n     */\n    createShadowRoot(el, doc = document) {\n        el.shadowRoot = doc.createDocumentFragment();\n        el.shadowRoot.parent = el;\n        return el.shadowRoot;\n    }\n    /**\n     * @param {?} el\n     * @return {?}\n     */\n    getShadowRoot(el) { return el.shadowRoot; }\n    /**\n     * @param {?} node\n     * @return {?}\n     */\n    isTextNode(node) { return node.nodeType === DominoAdapter.defaultDoc.TEXT_NODE; }\n    /**\n     * @param {?} node\n     * @return {?}\n     */\n    isCommentNode(node) {\n        return node.nodeType === DominoAdapter.defaultDoc.COMMENT_NODE;\n    }\n    /**\n     * @param {?} node\n     * @return {?}\n     */\n    isElementNode(node) {\n        return node ? node.nodeType === DominoAdapter.defaultDoc.ELEMENT_NODE : false;\n    }\n    /**\n     * @param {?} node\n     * @return {?}\n     */\n    hasShadowRoot(node) { return node.shadowRoot != null; }\n    /**\n     * @param {?} node\n     * @return {?}\n     */\n    isShadowRoot(node) { return this.getShadowRoot(node) == node; }\n    /**\n     * @param {?} el\n     * @param {?} name\n     * @return {?}\n     */\n    getProperty(el, name) {\n        if (name === 'href') {\n            // Domino tries tp resolve href-s which we do not want. Just return the\n            // attribute value.\n            return this.getAttribute(el, 'href');\n        }\n        else if (name === 'innerText') {\n            // Domino does not support innerText. Just map it to textContent.\n            return el.textContent;\n        }\n        return (/** @type {?} */ (el))[name];\n    }\n    /**\n     * @param {?} el\n     * @param {?} name\n     * @param {?} value\n     * @return {?}\n     */\n    setProperty(el, name, value) {\n        if (name === 'href') {\n            // Even though the server renderer reflects any properties to attributes\n            // map 'href' to attribute just to handle when setProperty is directly called.\n            this.setAttribute(el, 'href', value);\n        }\n        else if (name === 'innerText') {\n            // Domino does not support innerText. Just map it to textContent.\n            el.textContent = value;\n        }\n        (/** @type {?} */ (el))[name] = value;\n    }\n    /**\n     * @param {?} doc\n     * @param {?} target\n     * @return {?}\n     */\n    getGlobalEventTarget(doc, target) {\n        if (target === 'window') {\n            return doc.defaultView;\n        }\n        if (target === 'document') {\n            return doc;\n        }\n        if (target === 'body') {\n            return doc.body;\n        }\n        return null;\n    }\n    /**\n     * @param {?} doc\n     * @return {?}\n     */\n    getBaseHref(doc) {\n        /** @type {?} */\n        const base = this.querySelector(/** @type {?} */ ((doc.documentElement)), 'base');\n        /** @type {?} */\n        let href = '';\n        if (base) {\n            href = this.getHref(base);\n        }\n        // TODO(alxhub): Need relative path logic from BrowserDomAdapter here?\n        return href;\n    }\n    /**\n     * \\@internal\n     * @param {?} element\n     * @return {?}\n     */\n    _readStyleAttribute(element) {\n        /** @type {?} */\n        const styleMap = {};\n        /** @type {?} */\n        const styleAttribute = element.getAttribute('style');\n        if (styleAttribute) {\n            /** @type {?} */\n            const styleList = styleAttribute.split(/;+/g);\n            for (let i = 0; i < styleList.length; i++) {\n                /** @type {?} */\n                const style = styleList[i].trim();\n                if (style.length > 0) {\n                    /** @type {?} */\n                    const colonIndex = style.indexOf(':');\n                    if (colonIndex === -1) {\n                        throw new Error(`Invalid CSS style: ${style}`);\n                    }\n                    /** @type {?} */\n                    const name = style.substr(0, colonIndex).trim();\n                    styleMap[name] = style.substr(colonIndex + 1).trim();\n                }\n            }\n        }\n        return styleMap;\n    }\n    /**\n     * \\@internal\n     * @param {?} element\n     * @param {?} styleMap\n     * @return {?}\n     */\n    _writeStyleAttribute(element, styleMap) {\n        /** @type {?} */\n        let styleAttrValue = '';\n        for (const key in styleMap) {\n            /** @type {?} */\n            const newValue = styleMap[key];\n            if (newValue) {\n                styleAttrValue += key + ':' + styleMap[key] + ';';\n            }\n        }\n        element.setAttribute('style', styleAttrValue);\n    }\n    /**\n     * @param {?} element\n     * @param {?} styleName\n     * @param {?=} styleValue\n     * @return {?}\n     */\n    setStyle(element, styleName, styleValue) {\n        styleName = styleName.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n        /** @type {?} */\n        const styleMap = this._readStyleAttribute(element);\n        styleMap[styleName] = styleValue || '';\n        this._writeStyleAttribute(element, styleMap);\n    }\n    /**\n     * @param {?} element\n     * @param {?} styleName\n     * @return {?}\n     */\n    removeStyle(element, styleName) {\n        // IE requires '' instead of null\n        // see https://github.com/angular/angular/issues/7916\n        this.setStyle(element, styleName, '');\n    }\n    /**\n     * @param {?} element\n     * @param {?} styleName\n     * @return {?}\n     */\n    getStyle(element, styleName) {\n        /** @type {?} */\n        const styleMap = this._readStyleAttribute(element);\n        return styleMap[styleName] || '';\n    }\n    /**\n     * @param {?} element\n     * @param {?} styleName\n     * @param {?=} styleValue\n     * @return {?}\n     */\n    hasStyle(element, styleName, styleValue) {\n        /** @type {?} */\n        const value = this.getStyle(element, styleName);\n        return styleValue ? value == styleValue : value.length > 0;\n    }\n    /**\n     * @param {?} el\n     * @param {?} evt\n     * @return {?}\n     */\n    dispatchEvent(el, evt) {\n        el.dispatchEvent(evt);\n        /** @type {?} */\n        const doc = el.ownerDocument || el;\n        /** @type {?} */\n        const win = (/** @type {?} */ (doc)).defaultView;\n        if (win) {\n            win.dispatchEvent(evt);\n        }\n    }\n    /**\n     * @return {?}\n     */\n    getHistory() { throw _notImplemented('getHistory'); }\n    /**\n     * @return {?}\n     */\n    getLocation() { throw _notImplemented('getLocation'); }\n    /**\n     * @return {?}\n     */\n    getUserAgent() { return 'Fake user agent'; }\n    /**\n     * @return {?}\n     */\n    supportsWebAnimation() { return false; }\n    /**\n     * @return {?}\n     */\n    performanceNow() { return Date.now(); }\n    /**\n     * @return {?}\n     */\n    getAnimationPrefix() { return ''; }\n    /**\n     * @return {?}\n     */\n    getTransitionEnd() { return 'transitionend'; }\n    /**\n     * @return {?}\n     */\n    supportsAnimation() { return true; }\n    /**\n     * @param {?} el\n     * @return {?}\n     */\n    getDistributedNodes(el) { throw _notImplemented('getDistributedNodes'); }\n    /**\n     * @return {?}\n     */\n    supportsCookies() { return false; }\n    /**\n     * @param {?} name\n     * @return {?}\n     */\n    getCookie(name) { throw _notImplemented('getCookie'); }\n    /**\n     * @param {?} name\n     * @param {?} value\n     * @return {?}\n     */\n    setCookie(name, value) { throw _notImplemented('setCookie'); }\n}\nif (false) {\n    /** @type {?} */\n    DominoAdapter.defaultDoc;\n}\n//# sourceMappingURL=domino_adapter.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { Inject, Injectable } from '@angular/core';\nimport { DOCUMENT } from '@angular/platform-browser';\nimport { serializeDocument } from './domino_adapter';\n/**\n * Representation of the current platform state.\n *\n * \\@publicApi\n */\nexport class PlatformState {\n    /**\n     * @param {?} _doc\n     */\n    constructor(_doc) {\n        this._doc = _doc;\n    }\n    /**\n     * Renders the current state of the platform to string.\n     * @return {?}\n     */\n    renderToString() { return serializeDocument(this._doc); }\n    /**\n     * Returns the current DOM state.\n     * @return {?}\n     */\n    getDocument() { return this._doc; }\n}\nPlatformState.decorators = [\n    { type: Injectable },\n];\n/** @nocollapse */\nPlatformState.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\nif (false) {\n    /** @type {?} */\n    PlatformState.prototype._doc;\n}\n//# sourceMappingURL=platform_state.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** @type {?} */\nconst xhr2 = require('xhr2');\nimport { Injectable, Injector } from '@angular/core';\nimport { BrowserXhr, Http, ReadyState, RequestOptions, XHRBackend, XSRFStrategy } from '@angular/http';\nimport { HttpHandler, HttpBackend, XhrFactory, ɵHttpInterceptingHandler as HttpInterceptingHandler } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n/** @type {?} */\nconst isAbsoluteUrl = /^[a-zA-Z\\-\\+.]+:\\/\\//;\n/**\n * @param {?} url\n * @return {?}\n */\nfunction validateRequestUrl(url) {\n    if (!isAbsoluteUrl.test(url)) {\n        throw new Error(`URLs requested via Http on the server must be absolute. URL: ${url}`);\n    }\n}\nexport class ServerXhr {\n    /**\n     * @return {?}\n     */\n    build() { return new xhr2.XMLHttpRequest(); }\n}\nServerXhr.decorators = [\n    { type: Injectable },\n];\nexport class ServerXsrfStrategy {\n    /**\n     * @param {?} req\n     * @return {?}\n     */\n    configureRequest(req) { }\n}\nServerXsrfStrategy.decorators = [\n    { type: Injectable },\n];\n/**\n * @abstract\n * @template S, R\n */\nexport class ZoneMacroTaskWrapper {\n    /**\n     * @param {?} request\n     * @return {?}\n     */\n    wrap(request) {\n        return new Observable((observer) => {\n            /** @type {?} */\n            let task = /** @type {?} */ ((null));\n            /** @type {?} */\n            let scheduled = false;\n            /** @type {?} */\n            let sub = null;\n            /** @type {?} */\n            let savedResult = null;\n            /** @type {?} */\n            let savedError = null;\n            /** @type {?} */\n            const scheduleTask = (_task) => {\n                task = _task;\n                scheduled = true;\n                /** @type {?} */\n                const delegate = this.delegate(request);\n                sub = delegate.subscribe(res => savedResult = res, err => {\n                    if (!scheduled) {\n                        throw new Error('An http observable was completed twice. This shouldn\\'t happen, please file a bug.');\n                    }\n                    savedError = err;\n                    scheduled = false;\n                    task.invoke();\n                }, () => {\n                    if (!scheduled) {\n                        throw new Error('An http observable was completed twice. This shouldn\\'t happen, please file a bug.');\n                    }\n                    scheduled = false;\n                    task.invoke();\n                });\n            };\n            /** @type {?} */\n            const cancelTask = (_task) => {\n                if (!scheduled) {\n                    return;\n                }\n                scheduled = false;\n                if (sub) {\n                    sub.unsubscribe();\n                    sub = null;\n                }\n            };\n            /** @type {?} */\n            const onComplete = () => {\n                if (savedError !== null) {\n                    observer.error(savedError);\n                }\n                else {\n                    observer.next(savedResult);\n                    observer.complete();\n                }\n            };\n            /** @type {?} */\n            const _task = Zone.current.scheduleMacroTask('ZoneMacroTaskWrapper.subscribe', onComplete, {}, () => null, cancelTask);\n            scheduleTask(_task);\n            return () => {\n                if (scheduled && task) {\n                    task.zone.cancelTask(task);\n                    scheduled = false;\n                }\n                if (sub) {\n                    sub.unsubscribe();\n                    sub = null;\n                }\n            };\n        });\n    }\n}\nif (false) {\n    /**\n     * @abstract\n     * @param {?} request\n     * @return {?}\n     */\n    ZoneMacroTaskWrapper.prototype.delegate = function (request) { };\n}\nexport class ZoneMacroTaskConnection extends ZoneMacroTaskWrapper {\n    /**\n     * @param {?} request\n     * @param {?} backend\n     */\n    constructor(request, backend) {\n        super();\n        this.request = request;\n        this.backend = backend;\n        validateRequestUrl(request.url);\n        this.response = this.wrap(request);\n    }\n    /**\n     * @param {?} request\n     * @return {?}\n     */\n    delegate(request) {\n        this.lastConnection = this.backend.createConnection(request);\n        return /** @type {?} */ (this.lastConnection.response);\n    }\n    /**\n     * @return {?}\n     */\n    get readyState() {\n        return !!this.lastConnection ? this.lastConnection.readyState : ReadyState.Unsent;\n    }\n}\nif (false) {\n    /** @type {?} */\n    ZoneMacroTaskConnection.prototype.response;\n    /** @type {?} */\n    ZoneMacroTaskConnection.prototype.lastConnection;\n    /** @type {?} */\n    ZoneMacroTaskConnection.prototype.request;\n    /** @type {?} */\n    ZoneMacroTaskConnection.prototype.backend;\n}\nexport class ZoneMacroTaskBackend {\n    /**\n     * @param {?} backend\n     */\n    constructor(backend) {\n        this.backend = backend;\n    }\n    /**\n     * @param {?} request\n     * @return {?}\n     */\n    createConnection(request) {\n        return new ZoneMacroTaskConnection(request, this.backend);\n    }\n}\nif (false) {\n    /** @type {?} */\n    ZoneMacroTaskBackend.prototype.backend;\n}\nexport class ZoneClientBackend extends ZoneMacroTaskWrapper {\n    /**\n     * @param {?} backend\n     */\n    constructor(backend) {\n        super();\n        this.backend = backend;\n    }\n    /**\n     * @param {?} request\n     * @return {?}\n     */\n    handle(request) { return this.wrap(request); }\n    /**\n     * @param {?} request\n     * @return {?}\n     */\n    delegate(request) {\n        return this.backend.handle(request);\n    }\n}\nif (false) {\n    /** @type {?} */\n    ZoneClientBackend.prototype.backend;\n}\n/**\n * @param {?} xhrBackend\n * @param {?} options\n * @return {?}\n */\nexport function httpFactory(xhrBackend, options) {\n    /** @type {?} */\n    const macroBackend = new ZoneMacroTaskBackend(xhrBackend);\n    return new Http(macroBackend, options);\n}\n/**\n * @param {?} backend\n * @param {?} injector\n * @return {?}\n */\nexport function zoneWrappedInterceptingHandler(backend, injector) {\n    /** @type {?} */\n    const realBackend = new HttpInterceptingHandler(backend, injector);\n    return new ZoneClientBackend(realBackend);\n}\n/** @type {?} */\nexport const SERVER_HTTP_PROVIDERS = [\n    { provide: Http, useFactory: httpFactory, deps: [XHRBackend, RequestOptions] },\n    { provide: BrowserXhr, useClass: ServerXhr }, { provide: XSRFStrategy, useClass: ServerXsrfStrategy },\n    { provide: XhrFactory, useClass: ServerXhr }, {\n        provide: HttpHandler,\n        useFactory: zoneWrappedInterceptingHandler,\n        deps: [HttpBackend, Injector]\n    }\n];\n//# sourceMappingURL=http.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { InjectionToken } from '@angular/core';\n/**\n * Config object passed to initialize the platform.\n *\n * \\@publicApi\n * @record\n */\nexport function PlatformConfig() { }\n/** @type {?|undefined} */\nPlatformConfig.prototype.document;\n/** @type {?|undefined} */\nPlatformConfig.prototype.url;\n/** *\n * The DI token for setting the initial config for the platform.\n *\n * \\@publicApi\n  @type {?} */\nexport const INITIAL_CONFIG = new InjectionToken('Server.INITIAL_CONFIG');\n/** *\n * A function that will be executed when calling `renderModuleFactory` or `renderModule` just\n * before current platform state is rendered to string.\n *\n * \\@publicApi\n  @type {?} */\nexport const BEFORE_APP_SERIALIZED = new InjectionToken('Server.RENDER_MODULE_HOOK');\n//# sourceMappingURL=tokens.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { Inject, Injectable, Optional } from '@angular/core';\nimport { DOCUMENT, ɵgetDOM as getDOM } from '@angular/platform-browser';\nimport { Subject } from 'rxjs';\nimport * as url from 'url';\nimport { INITIAL_CONFIG } from './tokens';\n/**\n * @param {?} urlStr\n * @return {?}\n */\nfunction parseUrl(urlStr) {\n    /** @type {?} */\n    const parsedUrl = url.parse(urlStr);\n    return {\n        pathname: parsedUrl.pathname || '',\n        search: parsedUrl.search || '',\n        hash: parsedUrl.hash || '',\n    };\n}\n/**\n * Server-side implementation of URL state. Implements `pathname`, `search`, and `hash`\n * but not the state stack.\n */\nexport class ServerPlatformLocation {\n    /**\n     * @param {?} _doc\n     * @param {?} _config\n     */\n    constructor(_doc, _config) {\n        this._doc = _doc;\n        this.pathname = '/';\n        this.search = '';\n        this.hash = '';\n        this._hashUpdate = new Subject();\n        /** @type {?} */\n        const config = /** @type {?} */ (_config);\n        if (!!config && !!config.url) {\n            /** @type {?} */\n            const parsedUrl = parseUrl(config.url);\n            this.pathname = parsedUrl.pathname;\n            this.search = parsedUrl.search;\n            this.hash = parsedUrl.hash;\n        }\n    }\n    /**\n     * @return {?}\n     */\n    getBaseHrefFromDOM() { return /** @type {?} */ ((getDOM().getBaseHref(this._doc))); }\n    /**\n     * @param {?} fn\n     * @return {?}\n     */\n    onPopState(fn) {\n        // No-op: a state stack is not implemented, so\n        // no events will ever come.\n    }\n    /**\n     * @param {?} fn\n     * @return {?}\n     */\n    onHashChange(fn) { this._hashUpdate.subscribe(fn); }\n    /**\n     * @return {?}\n     */\n    get url() { return `${this.pathname}${this.search}${this.hash}`; }\n    /**\n     * @param {?} value\n     * @param {?} oldUrl\n     * @return {?}\n     */\n    setHash(value, oldUrl) {\n        if (this.hash === value) {\n            // Don't fire events if the hash has not changed.\n            return;\n        }\n        (/** @type {?} */ (this)).hash = value;\n        /** @type {?} */\n        const newUrl = this.url;\n        scheduleMicroTask(() => this._hashUpdate.next(/** @type {?} */ ({\n            type: 'hashchange', state: null, oldUrl, newUrl\n        })));\n    }\n    /**\n     * @param {?} state\n     * @param {?} title\n     * @param {?} newUrl\n     * @return {?}\n     */\n    replaceState(state, title, newUrl) {\n        /** @type {?} */\n        const oldUrl = this.url;\n        /** @type {?} */\n        const parsedUrl = parseUrl(newUrl);\n        (/** @type {?} */ (this)).pathname = parsedUrl.pathname;\n        (/** @type {?} */ (this)).search = parsedUrl.search;\n        this.setHash(parsedUrl.hash, oldUrl);\n    }\n    /**\n     * @param {?} state\n     * @param {?} title\n     * @param {?} newUrl\n     * @return {?}\n     */\n    pushState(state, title, newUrl) {\n        this.replaceState(state, title, newUrl);\n    }\n    /**\n     * @return {?}\n     */\n    forward() { throw new Error('Not implemented'); }\n    /**\n     * @return {?}\n     */\n    back() { throw new Error('Not implemented'); }\n}\nServerPlatformLocation.decorators = [\n    { type: Injectable },\n];\n/** @nocollapse */\nServerPlatformLocation.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [INITIAL_CONFIG,] }] }\n];\nif (false) {\n    /** @type {?} */\n    ServerPlatformLocation.prototype.pathname;\n    /** @type {?} */\n    ServerPlatformLocation.prototype.search;\n    /** @type {?} */\n    ServerPlatformLocation.prototype.hash;\n    /** @type {?} */\n    ServerPlatformLocation.prototype._hashUpdate;\n    /** @type {?} */\n    ServerPlatformLocation.prototype._doc;\n}\n/**\n * @param {?} fn\n * @return {?}\n */\nexport function scheduleMicroTask(fn) {\n    Zone.current.scheduleMicroTask('scheduleMicrotask', fn);\n}\n//# sourceMappingURL=location.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { Inject, Injectable } from '@angular/core';\nimport { DOCUMENT, ɵgetDOM as getDOM } from '@angular/platform-browser';\nexport class ServerEventManagerPlugin {\n    /**\n     * @param {?} doc\n     */\n    constructor(doc) {\n        this.doc = doc;\n    }\n    /**\n     * @param {?} eventName\n     * @return {?}\n     */\n    supports(eventName) { return true; }\n    /**\n     * @param {?} element\n     * @param {?} eventName\n     * @param {?} handler\n     * @return {?}\n     */\n    addEventListener(element, eventName, handler) {\n        return getDOM().onAndCancel(element, eventName, handler);\n    }\n    /**\n     * @param {?} element\n     * @param {?} eventName\n     * @param {?} handler\n     * @return {?}\n     */\n    addGlobalEventListener(element, eventName, handler) {\n        /** @type {?} */\n        const target = getDOM().getGlobalEventTarget(this.doc, element);\n        if (!target) {\n            throw new Error(`Unsupported event target ${target} for event ${eventName}`);\n        }\n        return this.addEventListener(target, eventName, handler);\n    }\n}\nServerEventManagerPlugin.decorators = [\n    { type: Injectable },\n];\n/** @nocollapse */\nServerEventManagerPlugin.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\nif (false) {\n    /** @type {?} */\n    ServerEventManagerPlugin.prototype.doc;\n}\n//# sourceMappingURL=server_events.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { DomElementSchemaRegistry } from '@angular/compiler';\nimport { Inject, Injectable, NgZone, ViewEncapsulation } from '@angular/core';\nimport { DOCUMENT, EventManager, ɵNAMESPACE_URIS as NAMESPACE_URIS, ɵSharedStylesHost as SharedStylesHost, ɵflattenStyles as flattenStyles, ɵgetDOM as getDOM, ɵshimContentAttribute as shimContentAttribute, ɵshimHostAttribute as shimHostAttribute } from '@angular/platform-browser';\n/** @type {?} */\nconst EMPTY_ARRAY = [];\nexport class ServerRendererFactory2 {\n    /**\n     * @param {?} eventManager\n     * @param {?} ngZone\n     * @param {?} document\n     * @param {?} sharedStylesHost\n     */\n    constructor(eventManager, ngZone, document, sharedStylesHost) {\n        this.eventManager = eventManager;\n        this.ngZone = ngZone;\n        this.document = document;\n        this.sharedStylesHost = sharedStylesHost;\n        this.rendererByCompId = new Map();\n        this.schema = new DomElementSchemaRegistry();\n        this.defaultRenderer = new DefaultServerRenderer2(eventManager, document, ngZone, this.schema);\n    }\n    /**\n     * @param {?} element\n     * @param {?} type\n     * @return {?}\n     */\n    createRenderer(element, type) {\n        if (!element || !type) {\n            return this.defaultRenderer;\n        }\n        switch (type.encapsulation) {\n            case ViewEncapsulation.Native:\n            case ViewEncapsulation.Emulated: {\n                /** @type {?} */\n                let renderer = this.rendererByCompId.get(type.id);\n                if (!renderer) {\n                    renderer = new EmulatedEncapsulationServerRenderer2(this.eventManager, this.document, this.ngZone, this.sharedStylesHost, this.schema, type);\n                    this.rendererByCompId.set(type.id, renderer);\n                }\n                (/** @type {?} */ (renderer)).applyToHost(element);\n                return renderer;\n            }\n            case ViewEncapsulation.Native:\n                throw new Error('Native encapsulation is not supported on the server!');\n            default: {\n                if (!this.rendererByCompId.has(type.id)) {\n                    /** @type {?} */\n                    const styles = flattenStyles(type.id, type.styles, []);\n                    this.sharedStylesHost.addStyles(styles);\n                    this.rendererByCompId.set(type.id, this.defaultRenderer);\n                }\n                return this.defaultRenderer;\n            }\n        }\n    }\n    /**\n     * @return {?}\n     */\n    begin() { }\n    /**\n     * @return {?}\n     */\n    end() { }\n}\nServerRendererFactory2.decorators = [\n    { type: Injectable },\n];\n/** @nocollapse */\nServerRendererFactory2.ctorParameters = () => [\n    { type: EventManager },\n    { type: NgZone },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: SharedStylesHost }\n];\nif (false) {\n    /** @type {?} */\n    ServerRendererFactory2.prototype.rendererByCompId;\n    /** @type {?} */\n    ServerRendererFactory2.prototype.defaultRenderer;\n    /** @type {?} */\n    ServerRendererFactory2.prototype.schema;\n    /** @type {?} */\n    ServerRendererFactory2.prototype.eventManager;\n    /** @type {?} */\n    ServerRendererFactory2.prototype.ngZone;\n    /** @type {?} */\n    ServerRendererFactory2.prototype.document;\n    /** @type {?} */\n    ServerRendererFactory2.prototype.sharedStylesHost;\n}\nclass DefaultServerRenderer2 {\n    /**\n     * @param {?} eventManager\n     * @param {?} document\n     * @param {?} ngZone\n     * @param {?} schema\n     */\n    constructor(eventManager, document, ngZone, schema) {\n        this.eventManager = eventManager;\n        this.document = document;\n        this.ngZone = ngZone;\n        this.schema = schema;\n        this.data = Object.create(null);\n    }\n    /**\n     * @return {?}\n     */\n    destroy() { }\n    /**\n     * @param {?} name\n     * @param {?=} namespace\n     * @param {?=} debugInfo\n     * @return {?}\n     */\n    createElement(name, namespace, debugInfo) {\n        if (namespace) {\n            return getDOM().createElementNS(NAMESPACE_URIS[namespace], name, this.document);\n        }\n        return getDOM().createElement(name, this.document);\n    }\n    /**\n     * @param {?} value\n     * @param {?=} debugInfo\n     * @return {?}\n     */\n    createComment(value, debugInfo) { return getDOM().createComment(value); }\n    /**\n     * @param {?} value\n     * @param {?=} debugInfo\n     * @return {?}\n     */\n    createText(value, debugInfo) { return getDOM().createTextNode(value); }\n    /**\n     * @param {?} parent\n     * @param {?} newChild\n     * @return {?}\n     */\n    appendChild(parent, newChild) { getDOM().appendChild(parent, newChild); }\n    /**\n     * @param {?} parent\n     * @param {?} newChild\n     * @param {?} refChild\n     * @return {?}\n     */\n    insertBefore(parent, newChild, refChild) {\n        if (parent) {\n            getDOM().insertBefore(parent, refChild, newChild);\n        }\n    }\n    /**\n     * @param {?} parent\n     * @param {?} oldChild\n     * @return {?}\n     */\n    removeChild(parent, oldChild) {\n        if (parent) {\n            getDOM().removeChild(parent, oldChild);\n        }\n    }\n    /**\n     * @param {?} selectorOrNode\n     * @param {?=} debugInfo\n     * @return {?}\n     */\n    selectRootElement(selectorOrNode, debugInfo) {\n        /** @type {?} */\n        let el;\n        if (typeof selectorOrNode === 'string') {\n            el = getDOM().querySelector(this.document, selectorOrNode);\n            if (!el) {\n                throw new Error(`The selector \"${selectorOrNode}\" did not match any elements`);\n            }\n        }\n        else {\n            el = selectorOrNode;\n        }\n        getDOM().clearNodes(el);\n        return el;\n    }\n    /**\n     * @param {?} node\n     * @return {?}\n     */\n    parentNode(node) { return getDOM().parentElement(node); }\n    /**\n     * @param {?} node\n     * @return {?}\n     */\n    nextSibling(node) { return getDOM().nextSibling(node); }\n    /**\n     * @param {?} el\n     * @param {?} name\n     * @param {?} value\n     * @param {?=} namespace\n     * @return {?}\n     */\n    setAttribute(el, name, value, namespace) {\n        if (namespace) {\n            getDOM().setAttributeNS(el, NAMESPACE_URIS[namespace], namespace + ':' + name, value);\n        }\n        else {\n            getDOM().setAttribute(el, name, value);\n        }\n    }\n    /**\n     * @param {?} el\n     * @param {?} name\n     * @param {?=} namespace\n     * @return {?}\n     */\n    removeAttribute(el, name, namespace) {\n        if (namespace) {\n            getDOM().removeAttributeNS(el, NAMESPACE_URIS[namespace], name);\n        }\n        else {\n            getDOM().removeAttribute(el, name);\n        }\n    }\n    /**\n     * @param {?} el\n     * @param {?} name\n     * @return {?}\n     */\n    addClass(el, name) { getDOM().addClass(el, name); }\n    /**\n     * @param {?} el\n     * @param {?} name\n     * @return {?}\n     */\n    removeClass(el, name) { getDOM().removeClass(el, name); }\n    /**\n     * @param {?} el\n     * @param {?} style\n     * @param {?} value\n     * @param {?} flags\n     * @return {?}\n     */\n    setStyle(el, style, value, flags) {\n        getDOM().setStyle(el, style, value);\n    }\n    /**\n     * @param {?} el\n     * @param {?} style\n     * @param {?} flags\n     * @return {?}\n     */\n    removeStyle(el, style, flags) {\n        getDOM().removeStyle(el, style);\n    }\n    /**\n     * @param {?} tagName\n     * @param {?} propertyName\n     * @return {?}\n     */\n    _isSafeToReflectProperty(tagName, propertyName) {\n        return this.schema.securityContext(tagName, propertyName, true) ===\n            this.schema.securityContext(tagName, propertyName, false);\n    }\n    /**\n     * @param {?} el\n     * @param {?} name\n     * @param {?} value\n     * @return {?}\n     */\n    setProperty(el, name, value) {\n        checkNoSyntheticProp(name, 'property');\n        getDOM().setProperty(el, name, value);\n        /** @type {?} */\n        const tagName = (/** @type {?} */ (el.tagName)).toLowerCase();\n        if (value != null && (typeof value === 'number' || typeof value == 'string') &&\n            name.toLowerCase() !== 'innerhtml' && this.schema.hasElement(tagName, EMPTY_ARRAY) &&\n            this.schema.hasProperty(tagName, name, EMPTY_ARRAY) &&\n            this._isSafeToReflectProperty(tagName, name)) {\n            this.setAttribute(el, name, value.toString());\n        }\n    }\n    /**\n     * @param {?} node\n     * @param {?} value\n     * @return {?}\n     */\n    setValue(node, value) { getDOM().setText(node, value); }\n    /**\n     * @param {?} target\n     * @param {?} eventName\n     * @param {?} callback\n     * @return {?}\n     */\n    listen(target, eventName, callback) {\n        checkNoSyntheticProp(eventName, 'listener');\n        if (typeof target === 'string') {\n            return /** @type {?} */ (this.eventManager.addGlobalEventListener(target, eventName, this.decoratePreventDefault(callback)));\n        }\n        return /** @type {?} */ ((this.eventManager.addEventListener(target, eventName, this.decoratePreventDefault(callback))));\n    }\n    /**\n     * @param {?} eventHandler\n     * @return {?}\n     */\n    decoratePreventDefault(eventHandler) {\n        return (event) => {\n            /** @type {?} */\n            const allowDefaultBehavior = this.ngZone.runGuarded(() => eventHandler(event));\n            if (allowDefaultBehavior === false) {\n                event.preventDefault();\n                event.returnValue = false;\n            }\n        };\n    }\n}\nif (false) {\n    /** @type {?} */\n    DefaultServerRenderer2.prototype.data;\n    /** @type {?} */\n    DefaultServerRenderer2.prototype.destroyNode;\n    /** @type {?} */\n    DefaultServerRenderer2.prototype.eventManager;\n    /** @type {?} */\n    DefaultServerRenderer2.prototype.document;\n    /** @type {?} */\n    DefaultServerRenderer2.prototype.ngZone;\n    /** @type {?} */\n    DefaultServerRenderer2.prototype.schema;\n}\n/** @type {?} */\nconst AT_CHARCODE = '@'.charCodeAt(0);\n/**\n * @param {?} name\n * @param {?} nameKind\n * @return {?}\n */\nfunction checkNoSyntheticProp(name, nameKind) {\n    if (name.charCodeAt(0) === AT_CHARCODE) {\n        throw new Error(`Found the synthetic ${nameKind} ${name}. Please include either \"BrowserAnimationsModule\" or \"NoopAnimationsModule\" in your application.`);\n    }\n}\nclass EmulatedEncapsulationServerRenderer2 extends DefaultServerRenderer2 {\n    /**\n     * @param {?} eventManager\n     * @param {?} document\n     * @param {?} ngZone\n     * @param {?} sharedStylesHost\n     * @param {?} schema\n     * @param {?} component\n     */\n    constructor(eventManager, document, ngZone, sharedStylesHost, schema, component) {\n        super(eventManager, document, ngZone, schema);\n        this.component = component;\n        /** @type {?} */\n        const componentId = 's' + component.id;\n        /** @type {?} */\n        const styles = flattenStyles(componentId, component.styles, []);\n        sharedStylesHost.addStyles(styles);\n        this.contentAttr = shimContentAttribute(componentId);\n        this.hostAttr = shimHostAttribute(componentId);\n    }\n    /**\n     * @param {?} element\n     * @return {?}\n     */\n    applyToHost(element) { super.setAttribute(element, this.hostAttr, ''); }\n    /**\n     * @param {?} parent\n     * @param {?} name\n     * @return {?}\n     */\n    createElement(parent, name) {\n        /** @type {?} */\n        const el = super.createElement(parent, name, this.document);\n        super.setAttribute(el, this.contentAttr, '');\n        return el;\n    }\n}\nif (false) {\n    /** @type {?} */\n    EmulatedEncapsulationServerRenderer2.prototype.contentAttr;\n    /** @type {?} */\n    EmulatedEncapsulationServerRenderer2.prototype.hostAttr;\n    /** @type {?} */\n    EmulatedEncapsulationServerRenderer2.prototype.component;\n}\n//# sourceMappingURL=server_renderer.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { Inject, Injectable, Optional } from '@angular/core';\nimport { DOCUMENT, ɵSharedStylesHost as SharedStylesHost, ɵTRANSITION_ID, ɵgetDOM as getDOM } from '@angular/platform-browser';\nexport class ServerStylesHost extends SharedStylesHost {\n    /**\n     * @param {?} doc\n     * @param {?} transitionId\n     */\n    constructor(doc, transitionId) {\n        super();\n        this.doc = doc;\n        this.transitionId = transitionId;\n        this.head = null;\n        this.head = getDOM().getElementsByTagName(doc, 'head')[0];\n    }\n    /**\n     * @param {?} style\n     * @return {?}\n     */\n    _addStyle(style) {\n        /** @type {?} */\n        let adapter = getDOM();\n        /** @type {?} */\n        const el = adapter.createElement('style');\n        adapter.setText(el, style);\n        if (!!this.transitionId) {\n            adapter.setAttribute(el, 'ng-transition', this.transitionId);\n        }\n        adapter.appendChild(this.head, el);\n    }\n    /**\n     * @param {?} additions\n     * @return {?}\n     */\n    onStylesAdded(additions) { additions.forEach(style => this._addStyle(style)); }\n}\nServerStylesHost.decorators = [\n    { type: Injectable },\n];\n/** @nocollapse */\nServerStylesHost.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: String, decorators: [{ type: Optional }, { type: Inject, args: [ɵTRANSITION_ID,] }] }\n];\nif (false) {\n    /** @type {?} */\n    ServerStylesHost.prototype.head;\n    /** @type {?} */\n    ServerStylesHost.prototype.doc;\n    /** @type {?} */\n    ServerStylesHost.prototype.transitionId;\n}\n//# sourceMappingURL=styles_host.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { ɵAnimationEngine } from '@angular/animations/browser';\nimport { PlatformLocation, ViewportScroller, ɵNullViewportScroller as NullViewportScroller, ɵPLATFORM_SERVER_ID as PLATFORM_SERVER_ID } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { Injector, NgModule, NgZone, Optional, PLATFORM_ID, PLATFORM_INITIALIZER, RendererFactory2, Testability, createPlatformFactory, platformCore, ɵALLOW_MULTIPLE_PLATFORMS as ALLOW_MULTIPLE_PLATFORMS } from '@angular/core';\nimport { HttpModule } from '@angular/http';\nimport { BrowserModule, DOCUMENT, EVENT_MANAGER_PLUGINS, ɵSharedStylesHost as SharedStylesHost, ɵgetDOM as getDOM } from '@angular/platform-browser';\nimport { ɵplatformCoreDynamic as platformCoreDynamic } from '@angular/platform-browser-dynamic';\nimport { NoopAnimationsModule, ɵAnimationRendererFactory } from '@angular/platform-browser/animations';\nimport { DominoAdapter, parseDocument } from './domino_adapter';\nimport { SERVER_HTTP_PROVIDERS } from './http';\nimport { ServerPlatformLocation } from './location';\nimport { PlatformState } from './platform_state';\nimport { ServerEventManagerPlugin } from './server_events';\nimport { ServerRendererFactory2 } from './server_renderer';\nimport { ServerStylesHost } from './styles_host';\nimport { INITIAL_CONFIG } from './tokens';\n/**\n * @param {?} feature\n * @return {?}\n */\nfunction notSupported(feature) {\n    throw new Error(`platform-server does not support '${feature}'.`);\n}\n/** @type {?} */\nexport const INTERNAL_SERVER_PLATFORM_PROVIDERS = [\n    { provide: DOCUMENT, useFactory: _document, deps: [Injector] },\n    { provide: PLATFORM_ID, useValue: PLATFORM_SERVER_ID },\n    { provide: PLATFORM_INITIALIZER, useFactory: initDominoAdapter, multi: true, deps: [Injector] }, {\n        provide: PlatformLocation,\n        useClass: ServerPlatformLocation,\n        deps: [DOCUMENT, [Optional, INITIAL_CONFIG]]\n    },\n    { provide: PlatformState, deps: [DOCUMENT] },\n    // Add special provider that allows multiple instances of platformServer* to be created.\n    { provide: ALLOW_MULTIPLE_PLATFORMS, useValue: true }\n];\n/**\n * @param {?} injector\n * @return {?}\n */\nfunction initDominoAdapter(injector) {\n    return () => { DominoAdapter.makeCurrent(); };\n}\n/**\n * @param {?} renderer\n * @param {?} engine\n * @param {?} zone\n * @return {?}\n */\nexport function instantiateServerRendererFactory(renderer, engine, zone) {\n    return new ɵAnimationRendererFactory(renderer, engine, zone);\n}\n/** @type {?} */\nexport const SERVER_RENDER_PROVIDERS = [\n    ServerRendererFactory2,\n    {\n        provide: RendererFactory2,\n        useFactory: instantiateServerRendererFactory,\n        deps: [ServerRendererFactory2, ɵAnimationEngine, NgZone]\n    },\n    ServerStylesHost,\n    { provide: SharedStylesHost, useExisting: ServerStylesHost },\n    { provide: EVENT_MANAGER_PLUGINS, multi: true, useClass: ServerEventManagerPlugin },\n];\n/**\n * The ng module for the server.\n *\n * \\@publicApi\n */\nexport class ServerModule {\n}\nServerModule.decorators = [\n    { type: NgModule, args: [{\n                exports: [BrowserModule],\n                imports: [HttpModule, HttpClientModule, NoopAnimationsModule],\n                providers: [\n                    SERVER_RENDER_PROVIDERS,\n                    SERVER_HTTP_PROVIDERS,\n                    { provide: Testability, useValue: null },\n                    { provide: ViewportScroller, useClass: NullViewportScroller },\n                ],\n            },] },\n];\n/**\n * @param {?} injector\n * @return {?}\n */\nfunction _document(injector) {\n    /** @type {?} */\n    let config = injector.get(INITIAL_CONFIG, null);\n    if (config && config.document) {\n        return parseDocument(config.document, config.url);\n    }\n    else {\n        return getDOM().createHtmlDocument();\n    }\n}\n/** *\n * \\@publicApi\n  @type {?} */\nexport const platformServer = createPlatformFactory(platformCore, 'server', INTERNAL_SERVER_PLATFORM_PROVIDERS);\n/** *\n * The server platform that supports the runtime compiler.\n *\n * \\@publicApi\n  @type {?} */\nexport const platformDynamicServer = createPlatformFactory(platformCoreDynamic, 'serverDynamic', INTERNAL_SERVER_PLATFORM_PROVIDERS);\n//# sourceMappingURL=server.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { APP_ID, NgModule } from '@angular/core';\nimport { DOCUMENT, TransferState, ɵescapeHtml as escapeHtml } from '@angular/platform-browser';\nimport { BEFORE_APP_SERIALIZED } from './tokens';\n/**\n * @param {?} doc\n * @param {?} appId\n * @param {?} transferStore\n * @return {?}\n */\nexport function serializeTransferStateFactory(doc, appId, transferStore) {\n    return () => {\n        /** @type {?} */\n        const script = doc.createElement('script');\n        script.id = appId + '-state';\n        script.setAttribute('type', 'application/json');\n        script.textContent = escapeHtml(transferStore.toJson());\n        doc.body.appendChild(script);\n    };\n}\n/**\n * NgModule to install on the server side while using the `TransferState` to transfer state from\n * server to client.\n *\n * \\@publicApi\n */\nexport class ServerTransferStateModule {\n}\nServerTransferStateModule.decorators = [\n    { type: NgModule, args: [{\n                providers: [\n                    TransferState, {\n                        provide: BEFORE_APP_SERIALIZED,\n                        useFactory: serializeTransferStateFactory,\n                        deps: [DOCUMENT, APP_ID, TransferState],\n                        multi: true,\n                    }\n                ]\n            },] },\n];\n//# sourceMappingURL=transfer_state.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { ApplicationRef } from '@angular/core';\nimport { ɵTRANSITION_ID } from '@angular/platform-browser';\nimport { first } from 'rxjs/operators';\nimport { PlatformState } from './platform_state';\nimport { platformDynamicServer, platformServer } from './server';\nimport { BEFORE_APP_SERIALIZED, INITIAL_CONFIG } from './tokens';\n/**\n * @record\n */\nfunction PlatformOptions() { }\n/** @type {?|undefined} */\nPlatformOptions.prototype.document;\n/** @type {?|undefined} */\nPlatformOptions.prototype.url;\n/** @type {?|undefined} */\nPlatformOptions.prototype.extraProviders;\n/**\n * @param {?} platformFactory\n * @param {?} options\n * @return {?}\n */\nfunction _getPlatform(platformFactory, options) {\n    /** @type {?} */\n    const extraProviders = options.extraProviders ? options.extraProviders : [];\n    return platformFactory([\n        { provide: INITIAL_CONFIG, useValue: { document: options.document, url: options.url } },\n        extraProviders\n    ]);\n}\n/**\n * @template T\n * @param {?} platform\n * @param {?} moduleRefPromise\n * @return {?}\n */\nfunction _render(platform, moduleRefPromise) {\n    return moduleRefPromise.then((moduleRef) => {\n        /** @type {?} */\n        const transitionId = moduleRef.injector.get(ɵTRANSITION_ID, null);\n        if (!transitionId) {\n            throw new Error(`renderModule[Factory]() requires the use of BrowserModule.withServerTransition() to ensure\nthe server-rendered app can be properly bootstrapped into a client app.`);\n        }\n        /** @type {?} */\n        const applicationRef = moduleRef.injector.get(ApplicationRef);\n        return applicationRef.isStable.pipe((first((isStable) => isStable)))\n            .toPromise()\n            .then(() => {\n            /** @type {?} */\n            const platformState = platform.injector.get(PlatformState);\n            /** @type {?} */\n            const callbacks = moduleRef.injector.get(BEFORE_APP_SERIALIZED, null);\n            if (callbacks) {\n                for (const callback of callbacks) {\n                    try {\n                        callback();\n                    }\n                    catch (e) {\n                        // Ignore exceptions.\n                        console.warn('Ignoring BEFORE_APP_SERIALIZED Exception: ', e);\n                    }\n                }\n            }\n            /** @type {?} */\n            const output = platformState.renderToString();\n            platform.destroy();\n            return output;\n        });\n    });\n}\n/**\n * Renders a Module to string.\n *\n * `document` is the full document HTML of the page to render, as a string.\n * `url` is the URL for the current render request.\n * `extraProviders` are the platform level providers for the current render request.\n *\n * Do not use this in a production server environment. Use pre-compiled {\\@link NgModuleFactory} with\n * {\\@link renderModuleFactory} instead.\n *\n * \\@publicApi\n * @template T\n * @param {?} module\n * @param {?} options\n * @return {?}\n */\nexport function renderModule(module, options) {\n    /** @type {?} */\n    const platform = _getPlatform(platformDynamicServer, options);\n    return _render(platform, platform.bootstrapModule(module));\n}\n/**\n * Renders a {\\@link NgModuleFactory} to string.\n *\n * `document` is the full document HTML of the page to render, as a string.\n * `url` is the URL for the current render request.\n * `extraProviders` are the platform level providers for the current render request.\n *\n * \\@publicApi\n * @template T\n * @param {?} moduleFactory\n * @param {?} options\n * @return {?}\n */\nexport function renderModuleFactory(moduleFactory, options) {\n    /** @type {?} */\n    const platform = _getPlatform(platformServer, options);\n    return _render(platform, platform.bootstrapModuleFactory(moduleFactory));\n}\n//# sourceMappingURL=utils.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nexport { INTERNAL_SERVER_PLATFORM_PROVIDERS as ɵINTERNAL_SERVER_PLATFORM_PROVIDERS, SERVER_RENDER_PROVIDERS as ɵSERVER_RENDER_PROVIDERS } from './server';\nexport { ServerRendererFactory2 as ɵServerRendererFactory2 } from './server_renderer';\n//# sourceMappingURL=private_export.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport { Version } from '@angular/core';\n/** *\n * \\@publicApi\n  @type {?} */\nexport const VERSION = new Version('7.1.0-beta.2-da59206995');\n//# sourceMappingURL=version.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nexport { PlatformState } from './platform_state';\nexport { ServerModule, platformDynamicServer, platformServer } from './server';\nexport { BEFORE_APP_SERIALIZED, INITIAL_CONFIG } from './tokens';\nexport { ServerTransferStateModule } from './transfer_state';\nexport { renderModule, renderModuleFactory } from './utils';\nexport { ɵINTERNAL_SERVER_PLATFORM_PROVIDERS, ɵSERVER_RENDER_PROVIDERS, ɵServerRendererFactory2 } from './private_export';\nexport { VERSION } from './version';\n//# sourceMappingURL=platform-server.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\nexport { PlatformState, ServerModule, platformDynamicServer, platformServer, BEFORE_APP_SERIALIZED, INITIAL_CONFIG, ServerTransferStateModule, renderModule, renderModuleFactory, VERSION, ɵINTERNAL_SERVER_PLATFORM_PROVIDERS, ɵSERVER_RENDER_PROVIDERS, ɵServerRendererFactory2 } from './src/platform-server';\n// This file only reexports content of the `src` folder. Keep it that way.\n//# sourceMappingURL=public_api.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\n */\n/**\n * Generated bundle index. Do not edit.\n */\nexport { PlatformState, ServerModule, platformDynamicServer, platformServer, BEFORE_APP_SERIALIZED, INITIAL_CONFIG, ServerTransferStateModule, renderModule, renderModuleFactory, VERSION, ɵINTERNAL_SERVER_PLATFORM_PROVIDERS, ɵSERVER_RENDER_PROVIDERS, ɵServerRendererFactory2 } from './public_api';\nexport { SERVER_HTTP_PROVIDERS as ɵi, ServerXhr as ɵe, ServerXsrfStrategy as ɵf, httpFactory as ɵg, zoneWrappedInterceptingHandler as ɵh } from './src/http';\nexport { instantiateServerRendererFactory as ɵa } from './src/server';\nexport { ServerEventManagerPlugin as ɵd } from './src/server_events';\nexport { ServerStylesHost as ɵc } from './src/styles_host';\nexport { serializeTransferStateFactory as ɵb } from './src/transfer_state';\n//# sourceMappingURL=platform-server.js.map"],"names":["url","BrowserDomAdapter","setRootDomAdapter","HttpInterceptingHandler","url.parse","getDOM","flattenStyles","SharedStylesHost","NAMESPACE_URIS","shimContentAttribute","shimHostAttribute","PLATFORM_SERVER_ID","ALLOW_MULTIPLE_PLATFORMS","NullViewportScroller","platformCoreDynamic","escapeHtml"],"mappings":"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"}